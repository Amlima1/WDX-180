{
  "$schema": "http://json-schema.org/schema",
  "$comment": "Understanding JSON Schema: https://json-schema.org/understanding-json-schema/UnderstandingJSONSchema.pdf",
  "definitions": {
    "level": {
      "type": "string",
      "enum": ["Beginner", "Intermediate", "Advanced"]
    },
    "type": {
      "type": "string",
      "enum": ["Video", "Audio", "Web Page", "Blog Post", "YouTube", "YouTube Playlist", "Coursera Course", "Udacity Course", "edX Course",  "Podcast", "Quora", "StackOverflow"]
    },
    "languages": {
      "$comment": "TODO: Add list of 2 character ISO country codes as enum",
      "type": "string",
      "enum": [ "EN"," BG", "EL", "FR" ]
    },
    "terms": {
      "$comment": "TODO: Import the terms from an external JSON file",
      "type": "string",
      "enum": [
        "ALU",
        "AND",
        "ASCII",
        "Audio Fingerprinting",
        "Binary",
        "Bit",
        "Byte",
        "Caesar Cipher",
        "Compression",
        "Density",
        "Encoding",
        "Full Adder",
        "Function",
        "GIF",
        "Half Adder",
        "Hexadecimal",
        "IEC",
        "IEEE 754",
        "IEEE", 
        "Interoperability",
        "JPEG",
        "Kibibyte",
        "Kilobyte",
        "Logic Gates",
        "Logic Unit",
        "Lossless",
        "Lossy",
        "NOT",
        "Overflow",
        "Picture Element",
        "Pixel",
        "PNG",
        "Public Key",
        "Resolution",
        "RGB",
        "SI",
        "Waveform",
        "XOR"
      ]
    }
  },
  "type": "object",
  "properties": {
    "resources": {
      "type": "object",
      "propertyNames": {
        "pattern": "^[a-z0-9\\-]+$"
      },
      "additionalProperties": {
        "type": "object",
        "$comment": "The Dublin Core Metadata Element Set is an ISO Standard (ISO 15836) well known in the Web and library worlds as a cross domain standard that defines 15 data elements for resource description. Spec: https://www.dublincore.org/specifications/dublin-core/usageguide/elements/. More about the properties: https://guides.library.ucsc.edu/c.php?g=618773&p=4306386. Video: https://www.youtube.com/watch?v=5HJVfp5c0kE. RFC: https://www.ietf.org/rfc/rfc5013.txt",
        "properties": {
          "title": { "type": "string" },
          "creator": { "type": "array", "items": { "type": "string" } },
          "subject": { "type": "string" },
          "description": { "type": "string" },
          "publisher": {  "type": "string" },
          "contributors": { "type": "array" },
          "date": { 
            "type": "string",
            "pattern": "^(0[1-9]|[1-2][0-9]|3[0-1])/(0[1-9]|1[0-2])/\\d{4}$"
          },
          "type": {
            "$ref": "#/definitions/type"
          },
          "format": {
            "type": "string",
            "$comment": "MIME Types: https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types. Word Documents are application/msword. Docx are application/vnd.openxmlformats-officedocument.wordprocessingml.document",
            "enum": [
              "application/msword",
              "application/vnd.openxmlformats-officedocument.wordprocessingml.document",
              "audio/aac",
              "text/css",
              "text/csv",
              "text/html",
              "image/jpeg",
              "image/gif",
              "text/javascript",
              "application/json",
              "audio/mpeg",
              "video/mp4",
              "video/mpeg",
              "audio/ogg",
              "video/ogg",
              "image/png",
              "application/pdf",
              "application/vnd.ms-powerpoint",
              "application/vnd.openxmlformats-officedocument.presentationml.presentation",
              "application/rtf",
              "text/plain",
              "image/webp",
              "video/webm",
              "application/xml",
              "application/zip"
            ]
          },
          "size": {
            "type": "number",
            "$comment": "Size in bytes"
          },
          "duration": {
            "type": "number",
            "$comment": "Duration in minutes"
          },
          "identifier": { "type": "string" },
          "source": { "type": "string" },
          "language": {
            "type": "array",
            "items": {
              "type": "string",
              "enum": ["en", "de", "it", "ar", "fr", "gr"]
            }
          },
          "relation": { "type": "string" },
          "coverage": { "type": "string" },
          "rights": {
            "type": "string",
            "enum": ["CC", "MIT", "GPL v3", "All Rights Reserved", "Standard YouTube License"]
          },
          "level": {
            "$ref": "#/definitions/level"
          },
          "meta": {
            "type": "object"
          },
          "vid": {
            "type": "string"
          },
          "captions": {
            "type": "boolean"
          },
          "terms": {
            "type": "array",
            "items": {
              "$ref": "#/definitions/terms"
            }
          },
          "concepts": {
            "$comment": "Concepts can either be a string or an array if it's a pair of Q&A",
            "type": "array",
            "items": {
              "type": ["string", "array"]
            }
          },
          "youtube": {
            "type" : "object",
            "properties" : {
              "id": {
                "type": "string",
                "pattern": "^(.{11})$"
              },
              "captions": {
                "type": "array",
                "items": {
                  "$ref": "#/definitions/languages"
                }
              },
              "playlist_id" : { "type": "string" },
              "playlist_index": { "type": "number" },
              "playlist_title": { "type": "string" }
            },
            "additionalProperties": false
          },
          "reviewers": {
            "type": "array",
            "items": {
              "type": "object"
            }
          }
        },
        "required": ["type"],
        "dependencies": {
          "type": {
            "oneOf": [
              {
                "properties": {
                  "type": {
                    "const": "YouTube"
                  }
                },
                "required": ["youtube"]
              },
              {
                "properties": {
                  "type": {
                    "not": {
                      "const": "YouTube"
                    }
                  }
                }
              }
            ]
          }
        },
      
        "additionalProperties": false
      }
    },
    "creators" : {

    }
  },
  "required": [
    "resources",
    "creators"
  ]
}